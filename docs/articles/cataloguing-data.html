<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cataloguing data • masDMT</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="cataloguing data">
<meta property="og:description" content="masDMT">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">masDMT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cataloguing-data.html">cataloguing data</a>
    </li>
    <li>
      <a href="../articles/finding-data.html">finding data</a>
    </li>
    <li>
      <a href="../articles/package-variables.html">system variables</a>
    </li>
    <li>
      <a href="../articles/sandbox.html">sandbox maker</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://macroecology-society.github.io/data-catalog/">
    <span class="fa fa-database"></span>
     
    datasets
  </a>
</li>
<li>
  <a href="https://github.com/macroecology-society/masDMT">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
<li>
  <a href="../mailto:mas@idiv.de">
    <span class="fa fa-envelope"></span>
     
    mail
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="cataloguing-data_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>cataloguing data</h1>
            
      
      
      <div class="hidden name"><code>cataloguing-data.Rmd</code></div>

    </div>

    
    
<div id="documenting-data" class="section level3">
<h3 class="hasAnchor">
<a href="#documenting-data" class="anchor"></a>Documenting data</h3>
<p align="justify">
This section describes how to document datasets and how to <a href="https://macroecology-society.github.io/data-catalog/">integrate them in the MAS data catalog.</a>. <code>masDMT</code> makes this registration easier, providing tools to automatically generate complex html records.
</p>
<p align="justify">
When creating a descriptor for a new dataset, we should keep the catalog organization in mind, Let’s peek under the hood. If we look at <a href="">where posts are stored</a>, we will see something like shown below. As you can see, each dataset has one folder with the its unique identifier. For example, the land cover dataset of the climate change initiative (CCI) is recorded as <code>CCI_landCover</code>, the same ID we can provide to <code>list_data</code> to find the path to the corresponding rasters (<a href="https://github.com/macroecology-society/masDMT/tree/master/docs/articles/find-data.html">see this article for examples on data access</a>).
</p>
<p><br></p>
<p><img src="file_structure_1.png" class="center"></p>
<p><br></p>
<p align="justify">
Keeping our focus on the <code>CCI_landCover</code> dataset, we can obtain further insights on which files a dataset contains. As shown below, this record contains the following files:
</p>
<ul>
<li>
<code>Rmd</code>: needed by <code>Rmarkdown</code> create an <code>html</code>
</li>
<li>
<code>html</code>: Knited from the <code>Rmd</code> file, used by the website
</li>
<li>
<code>CCI_landCover.png</code>: Preview image of the dataset
</li>
<li>
<code>CCI_landCover_extent.png</code>: Image showing the spatial extent of the dataset
</li>
<li>
<code>CCI_landCover.bib</code>: Bibtex file with literature reference of dataset
</li>
<li>
<code>CCI_landCover.yml</code>: Configuration file with metadata of dataset
</li>
</ul>
<p><br></p>
<p><img src="file_structure_2.png" class="center"></p>
<p><br></p>
<p align="justify">
Here, the most important thing is the <code>yaml</code> file. This is where we enter metadata required by the catalog, which will be used when automatically generating the <code>Rmd</code>, <code>html</code>, and extent image files. The preview image and the bibtex are optional.
</p>
<p><br></p>
</div>
<div id="creating-a-new-metadata-record" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-new-metadata-record" class="anchor"></a>Creating a new metadata record</h3>
<p align="justify">
As a practical example, let’s create a new metadata record for a hypothetical dataset called <code>land cover</code>. First we use <code><a href="../reference/build_descriptor.html">build_descriptor()</a></code> to setup the data descriptor, creating a file structure we can later feed to the data catalog. We will give this dataset the unique identifier <code>land_cover</code>, and provide a bibtex with its literature references and a preview image.
</p>
<p><br></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># specify arguments</span>
<span class="va">path</span> <span class="op">=</span> <span class="st">'/metadata/'</span> <span class="co"># path to directory where to create metadata record</span>
<span class="va">id</span> <span class="op">=</span> <span class="st">'land_cover'</span> <span class="co"># uique dataset identifier</span>
<span class="va">bib</span> <span class="op">=</span> <span class="st">'/data/bibtex.bib'</span> <span class="co"># path to bibtex</span>
<span class="va">img</span> <span class="op">=</span> <span class="st">'/data/preview.bib'</span> <span class="co"># path to preview image</span>

<span class="co"># run function to build dataset repository</span>
<span class="fu"><a href="../reference/build_descriptor.html">build_descriptor</a></span><span class="op">(</span><span class="va">path</span>, <span class="va">id</span>, bibtex<span class="op">=</span><span class="va">bib</span>, preview<span class="op">=</span><span class="va">img</span><span class="op">)</span></code></pre></div>
<p><br></p>
<p align="justify">
As seen below, the output consists of a folder names <code>land_cover</code>, containing several files with the same name. This includes the bibtex and preview image we provided, together with a yaml file.
</p>
<p><br></p>
<p><img src="example_0.png" style="width:100%;" class="center"></p>
<p><br></p>
</div>
<div id="documenting-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#documenting-metadata" class="anchor"></a>Documenting metadata</h3>
<p align="justify">
The yaml is copied from within <code>masDMT</code>, and specifies all fields that need completion. The table below lists those fields and provides their description. Notice that some fields have predefined keywords that must be followed.
</p>
<p><br></p>
<table class="table">
<colgroup>
<col width="17%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th>field</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>title</td>
<td>Unique identifier</td>
</tr>
<tr class="even">
<td>short_description</td>
<td>Short dataset description, used in preview and included in the extended metadata record</td>
</tr>
<tr class="odd">
<td>long_description</td>
<td>Long dataset description, used only in the extended metadata record</td>
</tr>
<tr class="even">
<td>documentation</td>
<td>Link to documentation file, or e-mail of whom to reach</td>
</tr>
<tr class="odd">
<td>data_access</td>
<td>link of where to access the data from, or e-mail of whom to reach</td>
</tr>
<tr class="even">
<td>license</td>
<td>Dataset license</td>
</tr>
<tr class="odd">
<td>categories</td>
<td>Keyword specifying the topic of the dataset, which is used to refine the search for records</td>
</tr>
<tr class="even">
<td>status</td>
<td>Status of the dataset (one of <code>available</code>, <code>developing</code>, or <code>planned</code>)</td>
</tr>
<tr class="odd">
<td>format</td>
<td>Format of the dataset (one of <code>Grid</code>, <code>Vector</code>, or <code>Table</code>)</td>
</tr>
<tr class="even">
<td>spatial_resolution</td>
<td>Spatial resolution, expressed as a mixture of a numeric element and a character (e.g. 30m)</td>
</tr>
<tr class="odd">
<td>temporal_resolution</td>
<td>Temporal resolution of dataset (e.g. yearly, multiyear snapshot)</td>
</tr>
<tr class="even">
<td>temporal_range</td>
<td>Start and end of the period covered by the dataset, expressed as dates (yyyy-mm-dd)</td>
</tr>
<tr class="odd">
<td>spatial_extent</td>
<td>Bounding coordinates of the dataset (min x, max x, min y, max y)</td>
</tr>
<tr class="even">
<td>subdatasets</td>
<td>List and description of subdatsets</td>
</tr>
</tbody>
</table>
<p><br></p>
<p align="justify">
The <code>subdatset</code> field extends further, with one entry for each subdataset. Below we have three examples on how to fill the <code>subdataset</code> section. Note that every subdataset requires a <code>variable</code> description, but additional metadata depends on the nature of the input dataset.
</p>
<p><br></p>
<div id="example-a-continuous-raster" class="section level4">
<h4 class="hasAnchor">
<a href="#example-a-continuous-raster" class="anchor"></a>Example A: Continuous raster</h4>
<p align="justify">
As shown in the example below, all continuous raster datasets demand is information on its minimum and maximum values. This requires us to add a <code>value_range</code> field, which we can describe with the minimum and maximum values, providing a scaling factor in parenthesis when applicable.
</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subdatasets</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">continuous_raster</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">variable</span><span class="kw">:</span><span class="at"> continuous raster dataset</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">content</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">value_range</span><span class="kw">:</span><span class="at"> 1...10 (scale factor 0.01)</span></span></code></pre></div>
<p><br></p>
</div>
<div id="example-b-categorical-raster" class="section level4">
<h4 class="hasAnchor">
<a href="#example-b-categorical-raster" class="anchor"></a>Example B: Categorical raster</h4>
<p align="justify">
Categorical raster datasets require some documentation effort. Here, we need to provide a field for each raster value, describing it with the adequate class.
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subdatasets</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">categorical_raster</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">variable</span><span class="kw">:</span><span class="at"> categorical raster dataset</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">content</span><span class="kw">:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">1</span><span class="kw">:</span><span class="at"> agriculture</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">2</span><span class="kw">:</span><span class="at"> forest</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">3</span><span class="kw">:</span><span class="at"> water</span></span></code></pre></div>
<p><br></p>
</div>
<div id="example-c-vectortable" class="section level4">
<h4 class="hasAnchor">
<a href="#example-c-vectortable" class="anchor"></a>Example C: Vector/Table</h4>
<p align="justify">
</p>
<p>Vector and tabular datasets impose a similar challenge as categorical rasters. Here, we need to provide each column as a field, and accopany that field with an adequate description.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subdatasets</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">vector_or_table</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">variable</span><span class="kw">:</span><span class="at"> tabular dataset</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">content</span><span class="kw">:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_1</span><span class="kw">:</span><span class="at"> description of column 1</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_2</span><span class="kw">:</span><span class="at"> description of column 2</span></span></code></pre></div>
<p><br></p>
<p align="justify">
The examples above demonstrate the documentation of individual subdatasets. However, we can add more than one by following the example below.
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subdatasets</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">vector_dataset_1</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">variable</span><span class="kw">:</span><span class="at"> tabular dataset</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">content</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_1</span><span class="kw">:</span><span class="at"> description of column 1</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_2</span><span class="kw">:</span><span class="at"> description of column 2</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">vector_dataset_2</span><span class="kw">:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">variable</span><span class="kw">:</span><span class="at"> tabular dataset</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">content</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_1</span><span class="kw">:</span><span class="at"> description of column 1</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">column_2</span><span class="kw">:</span><span class="at"> description of column 2</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="knitting-documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#knitting-documentation" class="anchor"></a>Knitting documentation</h3>
<p align="justify">
Before we can add our metadata record into the data catalog, we first need to knit it into an html. To assure the standardization of metadata records, we can se <code><a href="../reference/knit_descriptor.html">knit_descriptor()</a></code>. This function reads the yaml file we previously documented, and translates it into a fully formated <code>Rmarkdown</code> file, which is then translated into <code>html</code>.
</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use "path" and "id", specified when calling build_descriptor()</span>
<span class="fu"><a href="../reference/knit_descriptor.html">knit_descriptor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">'.yml'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steffen Ehrmann, Ruben Remelgado.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
